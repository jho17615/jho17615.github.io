<!DOCTYPE html>
<!-- HTML5 ë¬¸ì„œ ì„ ì–¸ -->
<html lang="ko">
  <!-- ë¬¸ì„œ ì–¸ì–´ëŠ” í•œêµ­ì–´ -->

  <head>
    <meta charset="UTF-8" />
    <!-- ë¬¸ì ì¸ì½”ë”© UTF-8 ì„¤ì • -->
    <title>Todo List</title>
    <!-- íƒ­ì— í‘œì‹œë  ì œëª© -->

    <!-- ë¶„ë¦¬ëœ CSS íŒŒì¼ 4ê°œ ë¶ˆëŸ¬ì˜¤ê¸° -->
    <link rel="stylesheet" href="App.css" />
    <link rel="stylesheet" href="Header.css" />
    <link rel="stylesheet" href="Editor.css" />
    <link rel="stylesheet" href="List.css" />
  </head>

  <body>
    <div class="App">
      <!-- ì „ì²´ë¥¼ ê°ì‹¸ëŠ” ë©”ì¸ ì»¨í…Œì´ë„ˆ -->

      <!-- Header (ì˜¤ëŠ˜ ë‚ ì§œì™€ ì œëª©) -->
      <div class="TodayBox">
        <!-- ì˜¤ëŠ˜ ë‚ ì§œ ì˜ì—­ -->
        <div class="label"><strong>ì˜¤ëŠ˜ì˜ PlanğŸ˜Š</strong></div>
        <!-- í…ìŠ¤íŠ¸ -->
        <div class="date" id="today-date"></div>
        <!-- ì˜¤ëŠ˜ ë‚ ì§œê°€ ì¶œë ¥ë  ì˜ì—­ -->
      </div>

      <!-- í•  ì¼ ì…ë ¥ì°½ + ë²„íŠ¼ -->
      <div class="Editor">
        <!-- ì…ë ¥ ë° ì¶”ê°€ ë²„íŠ¼ì„ í¬í•¨í•œ ì˜ì—­ -->
        <input type="text" id="todoInput" placeholder="ìƒˆë¡œìš´ todo" />
        <!-- í•  ì¼ ì…ë ¥ -->
        <button>ì¶”ê°€</button>
        <!-- í´ë¦­ ì‹œ ì…ë ¥ëœ í•  ì¼ ì¶”ê°€ -->
      </div>

      <!-- Todo List ì œëª© -->
      <div>
        <h3><strong>Todo List ğŸŒ±</strong></h3>
        <!-- ëª©ë¡ ìƒë‹¨ ì œëª© -->
      </div>

      <!-- ê²€ìƒ‰ì°½ + í•  ì¼ ëª©ë¡ ì¶œë ¥ -->
      <div class="List">
        <input type="text" id="keyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
        <!-- ê²€ìƒ‰ ì…ë ¥ì°½ -->
        <div class="todos_wrapper" id="todoList"></div>
        <!-- í•  ì¼ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ë“¤ì–´ì˜¬ ì˜ì—­ -->
      </div>
    </div>

    <!-- JavaScript ì˜ì—­ -->
    <script>
      // ê°€ìƒì˜ ì´ˆê¸° ë°ì´í„° ë°°ì—´ ì„ ì–¸
      let mockData = [
        {
          id: 0,
          isDone: false,
          content: "React ê³µë¶€",
          date: new Date().getTime(),
        },
        {
          id: 1,
          isDone: true,
          content: "ì¹œêµ¬ ë§Œë‚˜ê¸°",
          date: new Date().getTime(),
        },
        {
          id: 2,
          isDone: false,
          content: "ë‚®ì  ìê¸°",
          date: new Date().getTime(),
        },
      ];

      let idIndex = 3; // ìƒˆ í•  ì¼ì„ ìœ„í•œ ê³ ìœ  ID ì¦ê°€ìš© ì¸ë±ìŠ¤

      const dayNames = ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "]; // ìš”ì¼ ë°°ì—´

      // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
      function renderToday() {
        const d = new Date(); // í˜„ì¬ ë‚ ì§œ
        const yoil = dayNames[d.getDay()]; // ìš”ì¼ êµ¬í•˜ê¸°
        const dateStr = `${d.getFullYear()}ë…„ ${
          d.getMonth() + 1
        }ì›” ${d.getDate()}ì¼ (${yoil})`;
        document.getElementById("today-date").innerText = dateStr; // í™”ë©´ì— ë‚ ì§œ ì¶œë ¥
      }

      // ë‚ ì§œë¥¼ 'yyyy-mm-dd (ìš”ì¼)' í˜•ì‹ìœ¼ë¡œ ë³€í™˜
      function formatDate(ms) {
        const d = new Date(ms); // ë°€ë¦¬ì´ˆë¥¼ Dateë¡œ ë³€í™˜
        const yoil = dayNames[d.getDay()]; // ìš”ì¼ êµ¬í•˜ê¸°
        return `${d.getFullYear()}-${
          d.getMonth() + 1
        }-${d.getDate()} (${yoil})`;
      }

      // í™”ë©´ì— í•  ì¼ ëª©ë¡ì„ ë Œë”ë§
      function initData(data) {
        const list = document.getElementById("todoList"); // ëª©ë¡ ì˜ì—­ ì„ íƒ
        list.innerHTML = ""; // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”
        data.forEach((todo) => {
          // ë°ì´í„° ìˆœíšŒ
          const div = document.createElement("div"); // í•˜ë‚˜ì˜ í•  ì¼ ë°•ìŠ¤ ìƒì„±
          div.className = "TodoItem"; // í´ë˜ìŠ¤ëª… ì§€ì •
          div.innerHTML = `
          <input type="checkbox" onchange="onUpdate(${todo.id})" ${
            todo.isDone ? "checked" : ""
          }>
          <div class="content">${todo.content}</div>
          <div class="date">${formatDate(todo.date)}</div>
          <button onclick="todoDel(this)" value="${todo.id}">ì‚­ì œ</button>
        `;
          list.appendChild(div); // ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
        });
      }

      // ì¶”ê°€ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜
      document.querySelector(".Editor button").onclick = (e) => {
        e.preventDefault(); // í¼ ì œì¶œ ë§‰ê¸°
        const input = document.getElementById("todoInput"); // ì…ë ¥ í•„ë“œ ì„ íƒ
        const content = input.value.trim(); // ì•ë’¤ ê³µë°± ì œê±°
        if (!content) return alert("ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"); // ë¹ˆê°’ ê²½ê³ 
        mockData.push({
          // mockDataì— ìƒˆ í•­ëª© ì¶”ê°€
          id: idIndex++,
          isDone: false,
          content,
          date: new Date().getTime(),
        });
        input.value = ""; // ì…ë ¥ì°½ ì´ˆê¸°í™”
        initData(mockData); // ëª©ë¡ ë‹¤ì‹œ ë Œë”ë§
      };

      // ì²´í¬ë°•ìŠ¤ ë³€ê²½ ì‹œ ì™„ë£Œ ì—¬ë¶€ í† ê¸€
      function onUpdate(id) {
        mockData = mockData.map((todo) =>
          todo.id === id ? { ...todo, isDone: !todo.isDone } : todo
        );
        initData(mockData); // ëª©ë¡ ê°±ì‹ 
      }

      // ì‚­ì œ ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ í•­ëª© ì œê±°
      function todoDel(btn) {
        const id = parseInt(btn.value); // ë²„íŠ¼ valueì—ì„œ id ì¶”ì¶œ
        mockData = mockData.filter((todo) => todo.id !== id); // í•´ë‹¹ id ì œê±°
        initData(mockData); // ëª©ë¡ ê°±ì‹ 
      }

      // ê²€ìƒ‰ì–´ ì…ë ¥ ì‹œ ì‹¤ì‹œê°„ í•„í„°ë§
      document.getElementById("keyword").onkeyup = (e) => {
        const result = getFilterData(e.target.value); // ê²€ìƒ‰ì–´ ê¸°ë°˜ í•„í„°
        initData(result); // í•„í„° ê²°ê³¼ ë Œë”ë§
      };

      // ê²€ìƒ‰ì–´ì— í•´ë‹¹í•˜ëŠ” í•  ì¼ë§Œ ë°˜í™˜
      function getFilterData(keyword) {
        if (keyword === "") return mockData; // ê³µë°±ì´ë©´ ì „ì²´ ë°˜í™˜
        return mockData.filter((todo) => todo.content.includes(keyword)); // í¬í•¨ëœ í•­ëª©ë§Œ í•„í„°
      }

      // ì´ˆê¸°í™”: ë‚ ì§œ + ëª©ë¡ ì¶œë ¥
      window.onload = () => {
        renderToday(); // ì˜¤ëŠ˜ ë‚ ì§œ ì¶œë ¥
        initData(mockData); // ì´ˆê¸° ëª©ë¡ ì¶œë ¥
      };
    </script>
  </body>
</html>
